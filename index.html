<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–π –†–µ—Å—Ç–æ—Ä–∞–Ω: Likes/Doesn't Like Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∏ —Ñ–æ–Ω */
        body { 
            background-image: url('img/body.jpg'); 
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            padding: 10px;
        }
        
        #game-container { 
            width: 100%;
            max-width: 900px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.98);
        }
        
        /* –ó–æ–Ω–∞ –ö–ª–∏–µ–Ω—Ç–∞ (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –∏ —Ä–µ—á–∏) */
        #client-area {
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        @media (min-width: 640px) { /* sm breakpoint */
            #client-area {
                flex-direction: row;
                align-items: flex-start;
                text-align: left;
            }
        }

        /* *** –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ù–ê–õ–û–ñ–ï–ù–ò–Ø –ù–ê –¢–ï–ö–°–¢ ***
        –£–¥–∞–ª–µ–Ω–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∏—Å—Ç—ã–π Flexbox.
        */
        #avatar-container {
            display: flex;
            justify-content: flex-start;
            gap: 20px; /* –ó–∞–∑–æ—Ä –º–µ–∂–¥—É –∞–≤–∞—Ç–∞—Ä–∞–º–∏ */
            margin-right: 16px; /* –û—Ç—Å—Ç—É–ø –æ—Ç —Ä–µ—á–∏ */
            width: auto; /* –®–∏—Ä–∏–Ω–∞ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É */
            height: 120px; 
            flex-shrink: 0; /* –ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∞–≤–∞—Ç–∞—Ä–æ–≤ —Å–∂–∏–º–∞—Ç—å—Å—è */
        }

        .client-avatar { 
            width: 120px; 
            height: 120px; 
            object-fit: cover;
            border: 4px solid #00bcd4;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            /* –£–±—Ä–∞–Ω–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è 2-—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤ (—Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ Z-index, –ø–æ–∑–∏—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è flexbox) */
        #avatar-1 {
            z-index: 20;
        }
        #avatar-2 {
            z-index: 10;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ—á–∏ */
        #speech-bubble { 
            min-height: 120px;
            transition: background-color 0.5s;
            margin-top: 10px;
            flex-grow: 1;
        }
        
        @media (min-width: 640px) {
            #speech-bubble {
                margin-top: 0;
                margin-left: 16px; 
            }
        }
        /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏, –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–æ–ª–æ–Ω–∫–µ */
        @media (max-width: 639px) { 
            #avatar-container {
                margin-right: 0;
                margin-bottom: 16px; 
            }
            #speech-bubble {
                margin-left: 0;
            }
        }

        /* –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏ –∫–≤–∏–∑ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) */
        .food-item { 
            transition: all 0.2s; 
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            min-width: unset; 
        }
        .food-item img {
            width: 60px;
            height: 60px;
            object-fit: contain;
        }
        
        #inventory {
             grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        @media (min-width: 640px) {
             #inventory {
                grid-template-columns: repeat(6, minmax(0, 1fr));
            }
        }
        
        #quiz-area { 
            border: 3px dashed #00bcd4; 
        }
        
        .correct { color: #10b981; }
        .incorrect { color: #ef4444; }
    </style>
</head>
<body class="flex justify-center min-h-screen">

<div id="game-container" class="rounded-xl shadow-2xl">
    <div id="score-board" class="text-right text-2xl font-bold text-gray-700 mb-6">
        –°—á–µ—Ç: <span id="current-score" class="text-green-600">0</span> / 50
    </div>

    <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b pb-2">–£–≥–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π</h2>

    <div id="client-area" class="flex items-start mb-8 bg-gray-50 p-4 rounded-lg">
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –¥–≤—É—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤ -->
        <div id="avatar-container">
            <img id="avatar-1" class="client-avatar rounded-full" src="" alt="–ö–ª–∏–µ–Ω—Ç 1"> 
            <img id="avatar-2" class="client-avatar rounded-full hidden" src="" alt="–ö–ª–∏–µ–Ω—Ç 2"> 
        </div>
        
        <div id="speech-bubble" class="p-4 rounded-xl bg-blue-50 text-gray-800 flex-grow relative">
            <p id="client-speech" class="text-lg font-medium"></p>
        </div>
    </div>
    
    <h3 class="text-xl font-semibold text-gray-700 mb-4">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç)</h3>
    
    <div id="inventory" class="gap-4 mb-8 grid">
        <!-- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã JavaScript -->
    </div>

    <div id="quiz-area" class="text-center p-6 rounded-xl hidden">
        <p id="question-text" class="text-2xl font-bold mb-4"></p>
        <div id="options-buttons" class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
            <!-- –ö–Ω–æ–ø–∫–∏ –æ–ø—Ü–∏–π –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã JavaScript -->
        </div>
        <p id="feedback" class="text-xl font-semibold mt-4"></p>
    </div>
</div>

<script>
    // --- 1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –î–ê–ù–ù–´–ï ---
    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–≤–∞—Ç–∞—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ç–æ–ª—å–∫–æ —Ç–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ img/
    const AVATARS = [
        { name: "Arina", file: "img/Arina.png", gender: "She" },
        { name: "Armen", file: "img/Armen.png", gender: "He" },
        { name: "Artyom", file: "img/Artyom.png", gender: "He" },
        { name: "Miron", file: "img/Miron.png", gender: "He" },
        { name: "Ruslan", file: "img/Ruslan.png", gender: "He" },
        { name: "Taya", file: "img/Taya.png", gender: "She" },
        // Dima.png –±—ã–ª —É–¥–∞–ª–µ–Ω, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏. –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ Roma.png
        { name: "Roma", file: "img/Roma.png", gender: "He" }, 
        { name: "Vika", file: "img/Vika.png", gender: "She" },
        { name: "Egor", file: "img/Egor.png", gender: "He" }, 
        { name: "Katya", file: "img/Katya.png", gender: "She" },
    ];

    const ALL_FOOD_ITEMS = [
        "apples", "bananas", "biscuit", "chips", "fish", "lemons", "mangos", "meat", 
        "oranges", "pasta", "rice", "sandwiches", "sausages", "water", "juice", 
        "milk", "lemonade", "chocolate"
    ];

    let currentScore = 0;
    const targetScore = 50;
    let currentSubjects = []; // –ú–∞—Å—Å–∏–≤ –∏–∑ 1 –∏–ª–∏ 2 –∞–≤–∞—Ç–∞—Ä–æ–≤
    let subjectPronoun = "I"; // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç I –∏–ª–∏ We –¥–ª—è –≤—Å–µ–≥–æ —Å–µ–∞–Ω—Å–∞
    let currentStatements = []; // –ò—Å—Ö–æ–¥–Ω—ã–µ 6 —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–Ω–µ –º–µ–Ω—è—é—Ç—Å—è –≤ —Ö–æ–¥–µ –∫–≤–∏–∑–∞)
    let mentionedItems = []; // –ü—Ä–æ–¥—É–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ "–æ—Ç–≥–∞–¥–∞—Ç—å" (—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ —Ö–æ–¥–µ –∫–≤–∏–∑–∞)

    // --- 2. –£–¢–ò–õ–ò–¢–´ ---
    function getRandomElement(arr, exclude = []) {
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏.
        if (arr.length === 0) return null;
        return arr[Math.floor(Math.random() * arr.length)];
    }
    
    // --- 3. –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–¶–ï–ù–ê–†–ò–Ø ---
    function generateRandomClientData() {
        currentSubjects = [];
        currentStatements = [];
        
        // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –±—É–¥–µ—Ç –ª–∏ —ç—Ç–æ –û–î–ò–ù –∫–ª–∏–µ–Ω—Ç (I) –∏–ª–∏ –ì–†–£–ü–ü–ê (We)
        const isGroup = Math.random() < 0.5;

        if (isGroup) {
            subjectPronoun = "We";
            // –í—ã–±–∏—Ä–∞–µ–º 2 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞–≤–∞—Ç–∞—Ä–∞
            
            // 1. –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞
            const avatar1 = getRandomElement(AVATARS);
            
            // 2. –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ –∏–º–µ–Ω–∏ (–≥–∞—Ä–∞–Ω—Ç–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏)
            const availableForSecond = AVATARS.filter(a => a.name !== avatar1.name);
            
            // 3. –í—ã–±–∏—Ä–∞–µ–º –≤—Ç–æ—Ä–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ –∏–∑ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–≤–∞—Ç–∞—Ä
            const avatar2 = getRandomElement(availableForSecond.length > 0 ? availableForSecond : AVATARS);
            
            currentSubjects = [avatar1, avatar2];
        } else {
            subjectPronoun = "I";
            // –í—ã–±–∏—Ä–∞–µ–º 1 –∞–≤–∞—Ç–∞—Ä
            currentSubjects = [getRandomElement(AVATARS)];
        }
        
        // 2. –í—ã–±–∏—Ä–∞–µ–º 6 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
        const availableFood = [...ALL_FOOD_ITEMS];
        const selectedFood = [];
        for (let i = 0; i < 6; i++) {
            const foodIndex = Math.floor(Math.random() * availableFood.length);
            selectedFood.push(availableFood[foodIndex]);
            availableFood.splice(foodIndex, 1);
        }

        // 3. –°–æ–∑–¥–∞–µ–º 6 —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–≤—Å–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –û–î–ò–ù–ê–ö–û–í–û–ï –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ I –∏–ª–∏ We)
        selectedFood.forEach((item, index) => {
            const isPositive = Math.random() < 0.5; // 50/50 like/don't like

            currentStatements.push({
                subjectInSpeech: subjectPronoun,
                item: item,
                isPositive: isPositive,
                id: index
            });
        });

        // mentionedItems —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º —Å—Ç—Ä–æ–∫ (—Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤)
        mentionedItems = selectedFood; 
    }

    // --- 4. –ó–ê–ì–†–£–ó–ö–ê –ù–û–í–û–ì–û –ö–õ–ò–ï–ù–¢–ê (–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ) ---
    function loadNewClient() {
        // –°–±—Ä–æ—Å UI –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        document.getElementById('quiz-area').classList.add('hidden');
        document.getElementById('feedback').textContent = '';
        
        // –°–±—Ä–æ—Å —Ä–µ—á–µ–≤–æ–≥–æ –ø—É–∑—ã—Ä—è
        const speechBubbleEl = document.getElementById('speech-bubble');
        speechBubbleEl.classList.remove('bg-yellow-100');
        speechBubbleEl.classList.add('bg-blue-50');
        
        generateRandomClientData();

        const avatar1El = document.getElementById('avatar-1');
        const avatar2El = document.getElementById('avatar-2');
        const clientSpeechEl = document.getElementById('client-speech'); // –ò—Å–ø–æ–ª—å–∑—É–µ–º p#client-speech
        
        // –û–±–Ω–æ–≤–ª—è–µ–º UI –∞–≤–∞—Ç–∞—Ä–æ–≤
        avatar1El.src = currentSubjects[0].file;
        avatar1El.alt = currentSubjects[0].name;
        avatar1El.title = currentSubjects[0].name; // –ü–æ–¥—Å–∫–∞–∑–∫–∞
        avatar1El.classList.remove('opacity-50'); // –£–±–∏—Ä–∞–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
        
        if (subjectPronoun === "We") {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ç–æ—Ä–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞
            avatar2El.src = currentSubjects[1].file;
            avatar2El.alt = currentSubjects[1].name;
            avatar2El.title = currentSubjects[1].name; // –ü–æ–¥—Å–∫–∞–∑–∫–∞
            avatar2El.classList.remove('hidden');
        } else {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Ç–æ—Ä–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞
            avatar2El.classList.add('hidden');
        }
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –†–ï–ß–¨ –ö–õ–ò–ï–ù–¢–ê –û–¢ 1-–ì–û –õ–ò–¶–ê (I –∏–ª–∏ We)
        let speechText = "";
        currentStatements.forEach(data => {
            let displayedSubject = data.subjectInSpeech; // I –∏–ª–∏ We
            
            // –ì–ª–∞–≥–æ–ª –¥–ª—è I –∏ We –≤—Å–µ–≥–¥–∞ 'like'/'don\'t like'
            const verb = data.isPositive ? "like" : "don't like";
            
            speechText += `${displayedSubject} ${verb} ${data.item}. `;
        });

        clientSpeechEl.textContent = speechText; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞
        clientSpeechEl.style.fontStyle = 'normal'; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫—É—Ä—Å–∏–≤, –µ—Å–ª–∏ –±—ã–ª
        
        filterInventory();
    }

    // --- 5. –§–ò–õ–¨–¢–† –ò–ù–í–ï–ù–¢–ê–†–Ø –ò –ù–ê–ß–ê–õ–û –ö–í–ò–ó–ê –ü–û –ü–ê–ú–Ø–¢–ò ---
    function filterInventory() {
        renderInventory(mentionedItems);
    }

    // --- 6. –§–£–ù–ö–¶–ò–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –ò–ù–í–ï–ù–¢–ê–†–Ø ---
    function renderInventory(itemsToDisplay) {
        const inventory = document.getElementById('inventory');
        inventory.innerHTML = ''; 

        itemsToDisplay.forEach(item => {
            const fileName = item === 'biscuit' ? 'biscuit.png' : `${item}.png`;
            
            const itemDiv = document.createElement('div');
            itemDiv.className = 'food-item bg-gray-50 rounded-lg p-2 cursor-pointer hover:bg-yellow-200';
            itemDiv.setAttribute('data-item', item);
            
            itemDiv.innerHTML = `<img src="img/${fileName}" alt="${item}" class="w-16 h-16 mx-auto mb-1">
                                 <span class="text-sm font-medium capitalize">${item}</span>`;
            
            // –ò—â–µ–º –ø–æ–ª–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–¥—É–∫—Ç–∞
            const statementData = currentStatements.find(s => s.item === item);
            
            if (statementData) {
                itemDiv.onclick = () => {
                    // –í–∏–∑—É–∞–ª—å–Ω—ã–π –Ω–∞–º–µ–∫, —á—Ç–æ —Ç–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å
                    document.getElementById('speech-bubble').classList.remove('bg-blue-50');
                    document.getElementById('speech-bubble').classList.add('bg-yellow-100');
                    document.getElementById('client-speech').textContent = "–í—Å–ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —Å–∫–∞–∑–∞–ª(–∏) –∫–ª–∏–µ–Ω—Ç(—ã)..."; 
                    document.getElementById('client-speech').style.fontStyle = 'italic';
                    startQuiz(statementData); // –ü–µ—Ä–µ–¥–∞–µ–º –ø–æ–ª–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                };
            } else {
                itemDiv.style.opacity = '0.5';
                itemDiv.style.cursor = 'default';
            }
            
            inventory.appendChild(itemDiv);
        });
    }

    // --- 7. –ó–ê–ü–£–°–ö –í–ò–ö–¢–û–†–ò–ù–´ –ü–û –ü–†–û–î–£–ö–¢–£ (–ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–†–û–í–ï–†–ö–ê –ü–†–ï–î–ü–û–ß–¢–ï–ù–ò–Ø –ò –ì–†–ê–ú–ú–ê–¢–ò–ö–ò) ---
    function startQuiz(data) {
        document.getElementById('quiz-area').classList.remove('hidden');
        document.getElementById('feedback').textContent = '';
        document.getElementById('options-buttons').innerHTML = '';

        let quizSubject;

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—É–±—ä–µ–∫—Ç –¥–ª—è –∫–≤–∏–∑–∞ (He/She –∏–ª–∏ They)
        if (data.subjectInSpeech === "I") {
            // –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–∫–∞–∑–∞–ª "I...", –∑–Ω–∞—á–∏—Ç, –º—ã –¥–æ–ª–∂–Ω—ã –≥–æ–≤–æ—Ä–∏—Ç—å –æ –Ω–µ–º –≤ —Ç—Ä–µ—Ç—å–µ–º –ª–∏—Ü–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ (He/She)
            quizSubject = currentSubjects[0].gender; 
        } else { // We
            // –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—ã —Å–∫–∞–∑–∞–ª–∏ "We...", –∑–Ω–∞—á–∏—Ç, –∑–Ω–∞—á–∏—Ç, –º—ã –¥–æ–ª–∂–Ω—ã –≥–æ–≤–æ—Ä–∏—Ç—å –æ –Ω–∏—Ö –≤ —Ç—Ä–µ—Ç—å–µ–º –ª–∏—Ü–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ (They)
            quizSubject = "They";
        }

        // --- 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã ---
        const pluralLike = 'like';
        const pluralDontLike = "don't like";
        const singularLike = 'likes';
        const singularDontLike = "doesn't like";

        // --- 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ö–û–†–†–ï–ö–¢–ù–£–Æ —Ñ–æ—Ä–º—É (–≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ + –ø–∞–º—è—Ç—å –æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–∏) ---
        let requiredFormString;
        if (quizSubject === "They") {
            // –û–Ω–∏: like –∏–ª–∏ don't like
            requiredFormString = data.isPositive ? pluralLike : pluralDontLike;
        } else {
            // –û–Ω/–û–Ω–∞: likes –∏–ª–∏ doesn't like
            requiredFormString = data.isPositive ? singularLike : singularDontLike;
        }

        // --- 3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –û–ü–ü–û–ó–ò–¶–ò–û–ù–ù–£–Æ —Ñ–æ—Ä–º—É (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ, –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞) ---
        let oppositeFormString;
        if (data.isPositive) {
            // –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –õ–Æ–ë–ò–¢ (required=Positive), –æ–ø–ø–æ–∑–∏—Ü–∏—è - –ù–ï–ù–ê–í–ò–°–¢–¨ (Negative)
            oppositeFormString = (quizSubject === "They") ? pluralDontLike : singularDontLike;
        } else {
            // –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ù–ï –õ–Æ–ë–ò–¢ (required=Negative), –æ–ø–ø–æ–∑–∏—Ü–∏—è - –õ–Æ–ë–û–í–¨ (Positive)
            oppositeFormString = (quizSubject === "They") ? pluralLike : singularLike;
        }
        
        // 4. –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ (—Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –ø–æ—Ä—è–¥–æ–∫)
        const options = [requiredFormString, oppositeFormString];
        options.sort(() => Math.random() - 0.5); // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ

        options.forEach(optionValue => {
            createButton(optionValue, optionValue, requiredFormString);
        });

        document.getElementById('question-text').textContent = `${quizSubject} _______ ${data.item}.`;

        function createButton(buttonText, optionValue, requiredValue) {
            const btn = document.createElement('button');
            btn.textContent = buttonText;
            btn.className = 'w-full sm:w-auto bg-teal-500 hover:bg-teal-700 text-white font-bold py-3 px-6 rounded-lg shadow-md disabled:opacity-50';
            btn.onclick = () => checkAnswer(optionValue, requiredValue, data); 
            document.getElementById('options-buttons').appendChild(btn);
        }
    }

    // --- 8. –ü–†–û–í–ï–†–ö–ê –û–¢–í–ï–¢–ê –ò –ü–û–î–°–ß–ï–¢ –ë–ê–õ–õ–û–í ---
    function checkAnswer(userChoiceForm, requiredFormString, data) {
        const feedback = document.getElementById('feedback');
        const scoreSpan = document.getElementById('current-score');
        
        document.querySelectorAll('#options-buttons button').forEach(btn => btn.disabled = true);
        
        if (userChoiceForm === requiredFormString) {
            currentScore = Math.min(currentScore + 1, targetScore); 
            feedback.textContent = `–í–µ—Ä–Ω–æ! üëç (${currentScore}/${targetScore})`;
            feedback.className = 'correct text-2xl';
            
            // –£–¥–∞–ª—è–µ–º –ø—Ä–æ–¥—É–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö (mentionedItems)
            const itemIndex = mentionedItems.indexOf(data.item);
            if (itemIndex > -1) {
                mentionedItems.splice(itemIndex, 1); 
            }

        } else {
            currentScore = Math.max(currentScore - 1, 0); 
            feedback.textContent = `–ù–µ–≤–µ—Ä–Ω–æ. üëé –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${requiredFormString} (${currentScore}/${targetScore})`;
            feedback.className = 'incorrect text-2xl';
        }

        scoreSpan.textContent = currentScore;
        
        // --- –õ–û–ì–ò–ö–ê –ü–†–û–î–û–õ–ñ–ï–ù–ò–Ø –ò–ì–†–´ ---
        setTimeout(() => { 
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã
            if (currentScore >= targetScore) {
                feedback.textContent = "–ü–û–ë–ï–î–ê! –í—ã –Ω–∞–±—Ä–∞–ª–∏ 50 –±–∞–ª–ª–æ–≤ –∏ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –∑–∞–∫–∞–∑—ã –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤!";
                feedback.classList.add('bg-yellow-200', 'p-2', 'rounded');
                document.getElementById('inventory').innerHTML = '<p class="text-center text-xl mt-4">–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</p>';
                document.getElementById('quiz-area').classList.add('hidden');
                return;
            }

            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –µ—â–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
            if (mentionedItems.length > 0) {
                document.getElementById('quiz-area').classList.add('hidden');
                feedback.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç.';
                filterInventory(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
            } else {
                // –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –æ—Ç–≥–∞–¥–∞–Ω—ã, –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
                loadNewClient(); 
            }
        }, 2000); 
    }

    // --- 9. –ó–ê–ü–£–°–ö –ò–ì–†–´ ---
    function initGame() {
        loadNewClient();
    }
    
    document.addEventListener('DOMContentLoaded', initGame);
</script>
</body>
</html>